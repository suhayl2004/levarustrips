"use strict";(self.webpackChunklevarus=self.webpackChunklevarus||[]).push([[720],{5702:(I,v,d)=>{d.d(v,{m:()=>P});var e=d(4412),E=d(1413),C=d(7468),g=d(1626),F=d(5248),u=d(4438);let P=(()=>{class m extends F.U_{constructor(o){super(),this.http=o,this.API_URL="https://a87d-210-18-182-133.ngrok-free.app/requirements",this.isTblLoading=!0,this.dataChange=new e.t([]),this.data$=this.dataChange.asObservable(),this.reqAddedSource=new E.B,this.reqAdded$=this.reqAddedSource.asObservable(),this.selectedItemCount=0,this.getAllAdvanceTables()}get data(){return this.dataChange.value}getDialogData(){return this.dialogData}getAllAdvanceTables(){this.subs.sink=this.http.get(this.API_URL).subscribe({next:o=>{console.log(o),this.isTblLoading=!1,this.dataChange.next(o)},error:o=>{this.isTblLoading=!1}})}getAllReq(){return this.http.get(this.API_URL)}refreshData(){this.getAllAdvanceTables()}getReqDashboard(){return this.http.get(this.API_URL)}addReq(o){const p=new g.Lr({"Content-Type":"application/json"});return this.http.post(this.API_URL,o,{headers:p})}editReq(o){const p=new g.Lr({"Content-Type":"application/json"});return this.http.put(`${this.API_URL}/${o.req_id}`,o,{headers:p})}emitReqAdded(){this.reqAddedSource.next()}getSelectedItemCount(){return this.selectedItemCount}updateSelectedItemCount(o){this.selectedItemCount=o}addAdvanceTable(o){this.dialogData=o}updateAdvanceTable(o){this.dialogData=o}deleteAdvanceTable(o){return console.log(o),this.http.delete(`${this.API_URL}/${o}`)}deleteMultipleAdvanceTables(o){const p=o.map(_=>this.http.delete(`${this.API_URL}/${_}`));return(0,C.p)(p)}static#e=this.\u0275fac=function(p){return new(p||m)(u.KVO(g.Qq))};static#t=this.\u0275prov=u.jDH({token:m,factory:m.\u0275fac})}return m})()},4973:(I,v,d)=>{d.d(v,{N:()=>z});var e=d(4438),E=d(9417),C=d(3871),g=d(3955),F=d(177),u=d(8834),P=d(9213),m=d(7575);function A(s,a){1&s&&(e.j41(0,"div",10),e.EFF(1," Exceeded Maximum allowed file size limit of 10 MB "),e.k0s())}function o(s,a){1&s&&(e.j41(0,"div",10),e.EFF(1," Exceeded Maximum allowed file limit of 1 file "),e.k0s())}function p(s,a){1&s&&(e.j41(0,"div",11),e.EFF(1," Uploaded file format not allowed "),e.k0s())}function _(s,a){if(1&s&&(e.j41(0,"div",12),e.EFF(1),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.SpI(" Supported file formats: ",t.supportedFormats," ")}}function R(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"button",4),e.nrm(2,"i",5),e.EFF(3," Add attachment "),e.k0s(),e.j41(4,"input",6),e.bIt("change",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onFileChange(n))}),e.k0s(),e.DNE(5,A,2,0,"div",7)(6,o,2,0,"div",7)(7,p,2,0,"div",8)(8,_,2,1,"div",9),e.k0s()}if(2&s){const t=e.XpG();e.R7$(4),e.Y8G("title",t.getTitle()),e.R7$(),e.Y8G("ngIf",t.filesSizeExceededLimit),e.R7$(),e.Y8G("ngIf",t.filesExceededLimit),e.R7$(),e.Y8G("ngIf",t.restrictFile),e.R7$(),e.Y8G("ngIf",t.restrictFile)}}function U(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.k0s(),e.nrm(3,"mat-progress-bar",15),e.j41(4,"div",16),e.EFF(5),e.k0s(),e.j41(6,"button",17),e.bIt("click",function(){const n=e.eBV(t).index,r=e.XpG();return e.Njj(r.removeFile(n))}),e.j41(7,"mat-icon"),e.EFF(8,"close"),e.k0s()()()}if(2&s){const t=a.$implicit,i=a.index,n=e.XpG();e.R7$(2),e.Lme(" ",t.name," (",n.formatFileSize(t.size),") "),e.R7$(),e.Y8G("value",n.uploadProgress[i]),e.R7$(2),e.SpI(" ",n.uploadProgress[i],"% ")}}function T(s,a){1&s&&(e.j41(0,"div",10),e.EFF(1," Exceeded Maximum allowed file size limit of 10 MB "),e.k0s())}function S(s,a){1&s&&(e.j41(0,"div",10),e.EFF(1," Exceeded Maximum allowed file limit of 1 file! "),e.k0s())}function D(s,a){1&s&&(e.j41(0,"div",11),e.EFF(1," Uploaded file format not allowed "),e.k0s())}function b(s,a){if(1&s&&(e.j41(0,"div",12),e.EFF(1),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.SpI(" Supported file formats: ",t.supportedFormats," ")}}function y(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"button",4),e.nrm(2,"i",5),e.EFF(3," Add attachment "),e.k0s(),e.j41(4,"input",6),e.bIt("change",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.testOnFileChange(n))}),e.k0s(),e.DNE(5,T,2,0,"div",7)(6,S,2,0,"div",7)(7,D,2,0,"div",8)(8,b,2,1,"div",9),e.k0s()}if(2&s){const t=e.XpG();e.R7$(4),e.Y8G("title",t.getTestTitle()),e.R7$(),e.Y8G("ngIf",t.filesSizeExceededLimit),e.R7$(),e.Y8G("ngIf",t.filesExceededLimit),e.R7$(),e.Y8G("ngIf",t.restrictFile),e.R7$(),e.Y8G("ngIf",t.restrictFile)}}function M(s,a){if(1&s&&(e.j41(0,"div",14),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.Lme(" ",t.name.name," (",i.formatFileSize(t.name.size),")\n")}}function L(s,a){if(1&s&&e.nrm(0,"mat-progress-bar",15),2&s){const t=e.XpG().index,i=e.XpG(2);e.Y8G("value",i.testuploadProgress[t])}}function O(s,a){if(1&s&&(e.j41(0,"div",16),e.EFF(1),e.k0s()),2&s){const t=e.XpG().index,i=e.XpG(2);e.R7$(),e.SpI(" ",i.testuploadProgress[t],"%\n")}}function j(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const n=e.XpG().index,r=e.XpG(2);return e.Njj(r.testremoveFile(n))}),e.j41(1,"mat-icon"),e.EFF(2,"close"),e.k0s()()}}function B(s,a){if(1&s&&(e.j41(0,"div",13),e.DNE(1,M,2,2,"div",19)(2,L,1,1,"mat-progress-bar",20)(3,O,2,1,"div",21)(4,j,3,0,"button",22),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.Y8G("ngIf",t.name.name),e.R7$(),e.Y8G("ngIf",t.name.name),e.R7$(),e.Y8G("ngIf",t.name.name),e.R7$(),e.Y8G("ngIf",t.name.name)}}function $(s,a){if(1&s&&(e.qex(0),e.DNE(1,B,5,4,"div",18),e.bVm()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.fileDataArray)}}let z=(()=>{class s{constructor(t,i,n){this.host=t,this.Common=i,this.translateService=n,this.uploadProgressChanged=new e.bkB,this.fileUploadProgress=new e.bkB,this.uploadedFiles=[],this.uploadProgress=[],this.filesSizeExceededLimit=!1,this.restrictFile=!1,this.totalFileSizeLimit=1024e4,this.filesExceededLimit=!1,this.notsupportedFormats=[],this.supportedFormats=[],this.editFilesArray=[],this.adEditFilesArray=[],this.testuploadProgress=[],this.counter=0,this.testcounter=0,this.fileRemoved=new e.bkB,this.testfileCount=0,this.file=null}getTranslation(t){return this.translateService.instant(t)}simulateFileUploadProgress(t){this.fileUploadProgress.emit(t)}ngOnInit(){"add"!==this.action&&("string"==typeof this.fileData?this.fileDataArray=[{name:{name:this.fileData,size:0}}]:Array.isArray(this.fileData)&&(this.fileDataArray=this.fileData,console.log(this.fileSize)),this.testuploadProgress=this.fileDataArray.map(()=>100)),this.Common.editFiles$.subscribe(t=>{this.editFilesArray=t,console.log(this.editFilesArray),console.log(this.editFilesArray.length),console.log(this.adEditFilesArray)}),this.receivedAddBooleanValue=this.Common.getAddBooleanValue(),console.log(this.receivedAddBooleanValue),this.testMethod()}onFileChange(t){const i=t.target.files;let n=0;const r=["exe","bat","com","cmd","inf","ipa","osx","pif","run","wsh","pd"],h=["pdf","xlsx","xls","txt","csv","zip","mp3","mp4","ppt","pptx","jpg","jpeg","png","svg","doc","docx"];for(let l=0;l<i.length;l++){console.log(i[l].size),n+=i[l].size,console.log(i[l].size);const f=i[l].name.split("."),x=f[f.length-1].toLowerCase();if(r.includes(x))return this.restrictFile=!0,this.supportedFormats=` ${h.join(", ")}`,void console.log(this.notsupportedFormats);if(!h.includes(x))return this.restrictFile=!0,this.supportedFormats=` ${h.join(", ")}`,void console.log(this.notsupportedFormats);this.restrictFile=!1}if(n>this.totalFileSizeLimit)return this.filesSizeExceededLimit=!0,void console.error("Total file size exceeds the limit of 10 MB!");if(this.filesSizeExceededLimit=!1,this.uploadedFiles.length+i.length>1)return this.filesExceededLimit=!0,void console.log("Exceeded maximum allowed file of 1!");this.filesExceededLimit=!1;const c=[];for(let l=0;l<i.length;l++)c.push({name:i[l]});console.log("Files in onFileChange:",c),this.Common.setFiles(c),this.uploadedFiles=[],this.uploadProgress=[];for(let l=0;l<i.length;l++){const f=i.item(l);f&&(this.uploadedFiles=[],this.uploadedFiles.push(f),this.uploadProgress.push(0),this.uploadFile(f,this.uploadedFiles.length-1),console.log(this.uploadedFiles))}}getTestTitle(){return 0===this.adEditFilesArray.length?"No file chosen":1===this.adEditFilesArray.length?this.adEditFilesArray[0].name.name:this.adEditFilesArray.map(t=>t.name.name).join("\n ")}testOnFileChange(t){const i=t.target.files;let n=0;const r=["exe","bat","com","cmd","inf","ipa","osx","pif","run","wsh","pd"],h=["pdf","xlsx","xls","txt","csv","zip","mp3","mp4","ppt","pptx","jpg","jpeg","png","svg","doc","docx"];for(let c=0;c<i.length;c++){const l=i[c];n+=l.size;const f=l.name.split(".").pop()?.toLowerCase();if(r.includes(f||""))return this.restrictFile=!0,void console.error("Blocked file format!");if(!h.includes(f||""))return this.restrictFile=!0,void console.error("Unsupported file format!");this.restrictFile=!1}if(n>this.totalFileSizeLimit)return this.filesSizeExceededLimit=!0,void console.error("Total file size exceeds the limit!");if(this.filesSizeExceededLimit=!1,this.fileDataArray.length+i.length>1)return this.filesExceededLimit=!0,void console.error("Exceeded maximum allowed files of 1!");this.filesExceededLimit=!1;for(let c=0;c<i.length;c++){const l=i[c];this.fileDataArray.push({name:l}),this.testuploadProgress.push(0),this.testuploadFile(l,this.fileDataArray.length-1)}}testMethod(){this.receivedEditBooleanValue=this.Common.getEditBooleanValue(),console.log(this.receivedEditBooleanValue),this.Common.adEditSingleFile$.subscribe(t=>{console.log(t);for(let i=0;i<t.length;i++){const n=t[i];if(n){if(n.size+this.counter>1e7)return void(this.filesSizeExceededLimit=!0);this.testcounter+=n.size,this.adEditFilesArray.push(n),console.log(this.adEditFilesArray),this.testuploadProgress.push(100),this.testuploadFile(n,this.adEditFilesArray.length-1)}}})}testuploadFile(t,i){(()=>{const r=setInterval(()=>{this.testuploadProgress[i]+=Math.floor(10*Math.random()),this.testuploadProgress[i]>100&&(this.testuploadProgress[i]=100,clearInterval(r))},300)})()}getTitle(){return 0===this.uploadedFiles.length?"No file chosen":1===this.uploadedFiles.length?this.uploadedFiles[0].name:this.uploadedFiles.map(t=>t.name).join("\n ")}formatFileSize(t){return t<1024?t+" B":t<1048576?(t/1024).toFixed(2)+" KB":t<1073741824?(t/1048576).toFixed(2)+" MB":(t/1073741824).toFixed(2)+" GB"}removeFile(t){this.uploadedFiles.splice(t,1),this.uploadProgress.splice(t,1),this.filesExceededLimit=!1,this.fileRemoved.emit(),this.Common.emitFileRemoved()}testremoveFile(t){this.fileDataArray.splice(t,1),this.testuploadProgress.splice(t,1),this.fileRemoved.emit()}uploadFile(t,i){const n=()=>{const r=setInterval(()=>{this.uploadProgress[i]+=Math.floor(10*Math.random()),this.uploadProgress[i]>100&&(this.uploadProgress[i]=100,clearInterval(r)),100===this.uploadProgress[i]&&this.Common.emitUploadProgressChanged(100),this.uploadProgressChanged.emit(this.uploadProgress[i])},300)};setTimeout(()=>{n()},300)}emitFiles(t){const i=t&&t.item(0);this.onChange(i),this.file=i}writeValue(t){this.host.nativeElement.value="",this.file=null}registerOnChange(t){this.onChange=t}registerOnTouched(t){}static#e=this.\u0275fac=function(i){return new(i||s)(e.rXU(e.aKT),e.rXU(C.h),e.rXU(g.c$))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-single-file-upload"]],hostBindings:function(i,n){1&i&&e.bIt("change",function(h){return n.emitFiles(h.target.files)})},inputs:{fileData:"fileData",action:"action",fileSize:"fileSize"},outputs:{uploadProgressChanged:"uploadProgressChanged",fileUploadProgress:"fileUploadProgress",fileRemoved:"fileRemoved"},features:[e.Jv_([{provide:E.kq,useExisting:s,multi:!0}])],decls:4,vars:4,consts:[["class","file-drop-area",4,"ngIf"],["style","\n    font-size: 13px !important;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  ",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"file-drop-area"],["mat-raised-button","","color","primary",2,"height","30px","width","171px"],["aria-hidden","true",1,"fa","fa-upload"],["type","file",1,"file-input",3,"change","title"],["style","color: red; font-size: 13px !important; margin-top: 10px;width: 330px",4,"ngIf"],["style","\n      color: red;\n      font-size: 13px !important;\n      text-align: start;\n      margin-top: 10px;\n      width: 210px;\n    ",4,"ngIf"],["style","color: red; font-size: 13px !important; text-align: start;width: 620px;",4,"ngIf"],[2,"color","red","font-size","13px !important","margin-top","10px","width","330px"],[2,"color","red","font-size","13px !important","text-align","start","margin-top","10px","width","210px"],[2,"color","red","font-size","13px !important","text-align","start","width","620px"],[2,"font-size","13px !important","display","flex","align-items","center","justify-content","space-between"],[2,"width","214%","margin-top","-44px","margin-left","185px"],["mode","determinate",2,"margin-top","-41px",3,"value"],[2,"margin-top","-41px","margin-left","10px"],["mat-icon-button","",2,"margin-top","-43px",3,"click"],["style","\nfont-size: 13px !important;\ndisplay: flex;\nalign-items: center;\njustify-content: space-between;\n",4,"ngFor","ngForOf"],["style","width: 214%;margin-top: -44px;margin-left: 185px;",4,"ngIf"],["mode","determinate","style","margin-top: -41px;",3,"value",4,"ngIf"],["style","margin-top: -41px; margin-left: 10px;",4,"ngIf"],["mat-icon-button","","style","margin-top: -43px;",3,"click",4,"ngIf"]],template:function(i,n){1&i&&e.DNE(0,R,9,5,"div",0)(1,U,9,4,"div",1)(2,y,9,5,"div",0)(3,$,2,1,"ng-container",2),2&i&&(e.Y8G("ngIf",n.receivedAddBooleanValue),e.R7$(),e.Y8G("ngForOf",n.uploadedFiles),e.R7$(),e.Y8G("ngIf",n.receivedEditBooleanValue),e.R7$(),e.Y8G("ngIf",n.receivedEditBooleanValue))},dependencies:[F.Sq,F.bT,u.$z,u.iY,P.An,m.HM],styles:[".file-drop-area[_ngcontent-%COMP%]{border-radius:3px;position:relative;max-width:25%;padding:5px;transition:.2s}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{outline:none!important;font-size:14px!important;text-decoration:none}.file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;cursor:pointer;opacity:0}.file-msg[_ngcontent-%COMP%]{display:inline-block;margin-left:5px;font-size:12px;font-weight:500;color:#5b5bff}"]})}return s})()}}]);